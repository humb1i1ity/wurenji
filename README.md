# 无人机实时监测与物资配送系统

## 系统概述

这是一款基于Node.js开发的无人机实时位置监测与物资配送系统，具有以下功能：

### 核心功能

1. **实时位置监测**：
   - 实时显示无人机位置坐标
   - 动态更新无人机状态（空闲/配送中）
   - 电量监控与低电量预警
   - 可视化地图显示

2. **物资配送任务管理**：
   - 分配配送任务给空闲无人机
   - 设定目标位置坐标
   - 任务状态追踪
   - 历史任务记录

3. **数据持久化**：
   - SQLite数据库存储无人机和任务数据
   - 支持数据持久化保存

## 技术栈

### 后端
- Node.js + Express.js
- Socket.io 实时通信
- SQLite3 数据库

### 前端
- HTML5 + CSS3
- 原生JavaScript
- Socket.io 客户端

## 项目结构

```
drone-monitoring-system/
├── server.js              # 主服务器文件
├── droneManager.js        # 无人机管理模块
├── database.js            # 数据库操作模块
├── package.json           # 项目配置和依赖
├── public/                # 前端静态文件
│   ├── index.html         # 主页面
│   ├── styles.css         # 样式文件
│   └── app.js             # 前端逻辑
└── README.md              # 项目说明
```

## 安装与运行

### 前提条件

- Node.js 16.x 或更高版本
- npm 或 yarn 包管理器

### 安装步骤

1. **安装依赖**
   ```bash
   npm install
   ```

2. **启动服务器**
   ```bash
   npm start
   # 或使用开发模式（自动重启）
   npm run dev
   ```

3. **访问系统**
   打开浏览器访问：`http://localhost:3000`

## 使用说明

### 1. 查看无人机状态

- 系统启动后，会自动初始化3架示例无人机
- 在右侧面板可以查看所有无人机的详细信息
- 地图上会显示无人机的实时位置标记
- 鼠标悬停在地图标记上可查看无人机详情

### 2. 分配配送任务

1. 点击右侧面板的"分配新任务"按钮
2. 在弹出的模态框中：
   - 选择空闲状态的无人机
   - 输入任务描述
   - 设定目标位置的经纬度坐标
3. 点击"确认分配"按钮
4. 系统会自动将任务分配给选中的无人机
5. 无人机状态变为"配送中"，并开始向目标位置移动

### 3. 监控任务执行

- 在任务列表中可以查看所有任务的状态
- 地图上实时显示无人机的移动轨迹
- 任务完成后，无人机状态自动恢复为"空闲"

## 系统特性

### 实时通信
- 使用WebSocket技术实现服务器与客户端的实时数据传输
- 无人机位置每秒更新一次
- 任务状态实时同步

### 可视化界面
- 现代化的响应式设计
- 直观的地图显示
- 清晰的状态标识和数据展示
- 友好的用户交互体验

### 数据管理
- 自动保存无人机和任务数据到SQLite数据库
- 支持系统重启后数据恢复
- 可扩展的数据库设计

## 自定义配置

### 修改地图范围

在 `public/app.js` 中修改 `mapBounds` 对象：

```javascript
this.mapBounds = {
  minLat: 39.88,    // 最小纬度
  maxLat: 39.95,    // 最大纬度
  minLng: 116.38,   // 最小经度
  maxLng: 116.45    // 最大经度
};
```

### 添加初始无人机

在 `droneManager.js` 中的 `initDrones()` 方法中添加更多无人机配置：

```javascript
const sampleDrones = [
  {
    id: 'DR001',
    name: '配送无人机1号',
    status: 'idle',
    position: { lat: 39.9042, lng: 116.4074 },
    battery: 95,
    capacity: 10
  },
  // 添加更多无人机...
];
```

## 系统扩展

### 支持的扩展功能

1. **多用户权限管理**
2. **更复杂的任务规划算法**
3. **地理围栏与禁飞区设置**
4. **实时视频流集成**
5. **气象数据融合**
6. **移动端APP支持**

## 注意事项

1. 本系统为演示版本，实际应用需要对接真实的无人机硬件API
2. 地图显示为模拟实现，实际应用建议集成专业地图服务（如百度地图、高德地图）
3. 生产环境建议使用更可靠的数据库（如PostgreSQL、MongoDB）
4. 建议添加更完善的错误处理和日志记录

## 许可证

MIT License
